<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Portfolio of Shah Mehrab Hossain â€” Embedded Systems, Robotics (ROS2), IoT, Computer Vision, and UI/UX." />
  <title>Shah Mehrab Hossain</title>

  <link rel="icon" href="images/S.png" type="image/png" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />

  <!-- Icons -->
  <script src="https://kit.fontawesome.com/d36ce842ae.js" crossorigin="anonymous"></script>

  <!-- Tailwind (utilities only) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: ["class"],
      theme: { extend: { fontFamily: { sans: ["Inter", "ui-sans-serif", "system-ui"] } } }
    };
  </script>

  <!-- âœ… Theme bootstrap BEFORE paint -->
  <script>
    (function () {
      const stored = localStorage.getItem("theme");
      const mql = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)");
      const prefersDark = !!(mql && mql.matches);
      const mode = stored || (prefersDark ? "dark" : "light");
      document.documentElement.classList.toggle("dark", mode === "dark");
      document.documentElement.setAttribute("data-theme", mode);
    })();
  </script>

  <style>
    :root{
      --radius-1: 16px;
      --radius-2: 22px;
      --radius-3: 30px;

      --shadow-1: 0 12px 40px rgb(2 6 23 / .08);
      --shadow-2: 0 22px 70px rgb(2 6 23 / .12);
      --shadow-3: 0 30px 90px rgb(2 6 23 / .18);

      --ease: cubic-bezier(.2,.8,.2,1);

      --accent: 99 102 241;
      --accent2: 34 211 238;

      --bg: 248 250 252;
      --bg2: 241 245 249;
      --surface: 255 255 255;
      --surface2: 248 250 252;

      --text: 15 23 42;
      --muted: 71 85 105;
      --muted2: 100 116 139;

      --border-subtle: 15 23 42;
      --border-strong: 15 23 42;

      --ring: 99 102 241;

      --noise-opacity: .04;
      --grid-opacity: .09;
    }

    html.dark{
      --bg: 2 6 23;
      --bg2: 10 16 35;
      --surface: 15 23 42;
      --surface2: 2 6 23;

      --text: 226 232 240;
      --muted: 175 190 210;
      --muted2: 132 150 175;

      --border-subtle: 255 255 255;
      --border-strong: 255 255 255;

      --ring: 129 140 248;

      --noise-opacity: .06;
      --grid-opacity: .08;

      --shadow-1: 0 14px 55px rgb(0 0 0 / .38);
      --shadow-2: 0 24px 80px rgb(0 0 0 / .55);
      --shadow-3: 0 34px 110px rgb(0 0 0 / .65);
    }

    *{ box-sizing: border-box; }
    html,body{ height: 100%; }
    body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: rgb(var(--text));
      background:
        radial-gradient(1200px circle at 20% -10%, rgb(var(--accent) / .16), transparent 60%),
        radial-gradient(1200px circle at 90% 10%, rgb(var(--accent2) / .10), transparent 55%),
        linear-gradient(180deg, rgb(var(--bg)), rgb(var(--bg2)));
      overflow-x: hidden;
    }
    html.dark body{
      background:
        radial-gradient(900px circle at 20% -10%, rgb(var(--accent) / .10), transparent 60%),
        radial-gradient(900px circle at 90% 10%, rgb(var(--accent2) / .06), transparent 55%),
        linear-gradient(180deg, rgb(var(--bg)), rgb(var(--bg2)));
    }

    /* âœ… Mobile-first container improvements */
    .containerX{
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 14px;
    }
    @media (min-width: 640px){
      .containerX{ padding: 0 18px; }
    }

    .bg-grid{
      position: fixed; inset: 0;
      pointer-events: none;
      z-index: -1;
      opacity: var(--grid-opacity);
      background-image:
        linear-gradient(to right, rgb(var(--border-subtle) / .08) 1px, transparent 1px),
        linear-gradient(to bottom, rgb(var(--border-subtle) / .08) 1px, transparent 1px);
      background-size: 56px 56px;
      mask-image: radial-gradient(circle at 40% 10%, rgb(0 0 0 / 1), rgb(0 0 0 / .2) 55%, rgb(0 0 0 / 0) 85%);
    }
    .bg-noise{
      position: fixed; inset: 0;
      pointer-events: none;
      z-index: -1;
      opacity: var(--noise-opacity);
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
    }

    .theme-transition, .theme-transition *{
      transition: background-color .25s var(--ease), color .25s var(--ease), border-color .25s var(--ease);
    }

    .glass{
      background: rgb(var(--surface) / .70);
      border: 1px solid rgb(var(--border-subtle) / .10);
      border-radius: var(--radius-2);
      box-shadow: var(--shadow-1);
      backdrop-filter: blur(14px);
    }

    .panel{
      background: rgb(var(--surface) / .92);
      border: 1px solid rgb(var(--border-subtle) / .10);
      border-radius: var(--radius-2);
      box-shadow: var(--shadow-2);
    }

    .card{
      border-radius: var(--radius-2);
      border: 1px solid rgb(var(--border-subtle) / .10);
      background: rgb(var(--surface) / .70);
      box-shadow: var(--shadow-1);
      backdrop-filter: blur(12px);
      overflow: hidden;
    }

    .muted{ color: rgb(var(--muted)); }
    .muted2{ color: rgb(var(--muted2)); }

    /* âœ… Better tap targets on mobile */
    .btn{
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 12px 16px;
      min-height: 44px;
      border-radius: 16px;
      font-weight: 800;
      letter-spacing: -.01em;
      border: 1px solid rgb(var(--border-subtle) / .12);
      background: rgb(var(--surface) / .70);
      user-select: none;
      line-height: 1;
      transition: transform .18s var(--ease), box-shadow .18s var(--ease), background-color .2s var(--ease);
    }
    .btn:hover{ transform: translateY(-2px); box-shadow: 0 0 0 6px rgb(var(--accent) / .12); }
    .btn:active{ transform: translateY(0); }

    .btn-primary{
      font-weight: 900;
      border: 1px solid rgb(var(--accent) / .30);
      background: linear-gradient(135deg, rgb(var(--accent) / .95), rgb(var(--accent2) / .65));
      color: rgb(2 6 23);
      box-shadow: 0 18px 60px rgb(var(--accent) / .20);
    }
    html.dark .btn-primary{ color: rgb(255 255 255); }

    .chip{
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgb(var(--border-subtle) / .10);
      background: rgb(var(--surface) / .65);
      font-size: 12px;
      font-weight: 900;
      white-space: nowrap;
    }

    input, textarea, select{
      outline: none;
      border-radius: 16px;
      border: 1px solid rgb(var(--border-subtle) / .12);
      background: rgb(var(--surface) / .75);
      color: rgb(var(--text));
      padding: 12px 14px;
      min-height: 44px;
    }
    input::placeholder, textarea::placeholder{ color: rgb(var(--muted) / .9); }
    :focus-visible{
      outline: 3px solid rgb(var(--ring) / .32);
      outline-offset: 4px;
      border-radius: 18px;
    }

    .kicker{
      display: inline-flex; align-items: center; gap: 10px;
      font-size: 12px; font-weight: 900; letter-spacing: .12em;
      text-transform: uppercase; color: rgb(var(--muted));
    }
    .kicker .dot{
      width: 10px; height: 10px; border-radius: 999px;
      background: rgb(var(--accent));
      box-shadow: 0 0 0 6px rgb(var(--accent) / .12);
    }
    .h2{
      font-size: clamp(22px, 2.6vw, 40px);
      font-weight: 950;
      letter-spacing: -.04em;
      line-height: 1.05;
    }
    .h3{
      font-size: 18px;
      font-weight: 950;
      letter-spacing: -.02em;
    }

    /* âœ… Better reveal + mobile pacing */
    .reveal{ opacity: 0; transform: translateY(14px); }
    .reveal.in{ opacity: 1; transform: translateY(0); transition: opacity .8s var(--ease), transform .8s var(--ease); }

    /* âœ… Navbar: compact on scroll, better mobile */
    .navWrap{
      position: sticky; top: 0; z-index: 60;
      backdrop-filter: blur(16px);
    }
    .navCompact .glass{ padding-top: 10px !important; padding-bottom: 10px !important; }

    .navLink{
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid transparent;
      font-weight: 950;
      font-size: 14px;
      transition: box-shadow .2s var(--ease), background-color .2s var(--ease), border-color .2s var(--ease);
    }
    .navLink:hover{ box-shadow: 0 0 0 6px rgb(var(--accent) / .12); }
    .navLink.active{
      background: rgb(var(--accent) / .10);
      border-color: rgb(var(--accent) / .22);
    }
    html.dark .navLink.active{
      background: rgb(255 255 255 / .06);
      border-color: rgb(255 255 255 / .14);
    }

    .avatarRing{
      position: relative;
      border-radius: 28px;
      overflow: hidden;
      border: 1px solid rgb(var(--border-subtle) / .12);
      background: rgb(var(--surface) / .60);
      box-shadow: var(--shadow-2);
    }
    .avatarRing::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(600px circle at 20% 10%, rgb(var(--accent) / .35), transparent 60%),
        radial-gradient(600px circle at 90% 20%, rgb(var(--accent2) / .25), transparent 55%);
      opacity: .55;
      pointer-events: none;
    }
    html.dark .avatarRing::before{ opacity: .40; }

    /* Preloader */
    #preloader{
      position: fixed; inset: 0;
      display: grid; place-items: center;
      background: rgb(0 0 0);
      z-index: 999999;
      transition: opacity .35s var(--ease), visibility .35s var(--ease);
    }
    #preloader.hidden{ opacity: 0; visibility: hidden; }
    .dots{ display:flex; gap:8px; }
    .dots span{
      width: 10px; height: 10px; border-radius: 999px;
      background: rgb(255 255 255 / .75);
      animation: bounce 1s var(--ease) infinite;
    }
    .dots span:nth-child(2){ animation-delay: .12s; }
    .dots span:nth-child(3){ animation-delay: .24s; }
    @keyframes bounce{
      0%,100%{ transform: translateY(0); opacity: .7; }
      50%{ transform: translateY(-10px); opacity: 1; }
    }

    /* Cursor */
    body.cursor-on{ cursor: none; }
    .cursor-dot, .cursor-ring{
      position: fixed; top:0; left:0;
      pointer-events:none;
      z-index: 99999;
      transform: translate(-50%,-50%);
      will-change: transform, width, height, opacity;
      display: none;
    }
    .cursor-dot{
      width: 10px; height: 10px;
      border-radius: 999px;
      background: rgb(255 255 255);
      mix-blend-mode: difference;
    }
    .cursor-ring{
      width: 44px; height: 44px;
      border-radius: 999px;
      border: 2px solid rgb(255 255 255 / .4);
      background: radial-gradient(circle, rgb(255 255 255 / .12), transparent 60%);
      mix-blend-mode: difference;
      transition: width .14s var(--ease), height .14s var(--ease), opacity .14s var(--ease);
      opacity: .85;
    }
    body.cursor-style-dot .cursor-ring{ display: none !important; }
    body.cursor-style-ring .cursor-dot{ width: 6px; height: 6px; opacity: .85; }
    body.cursor-style-neo .cursor-ring{
      border-color: rgb(255 255 255 / .55);
      background: radial-gradient(circle, rgb(255 255 255 / .10), transparent 62%);
      opacity: .95;
      mix-blend-mode: difference;
    }
    body.cursor-style-glow .cursor-dot{
      background: rgb(var(--accent));
      mix-blend-mode: normal;
      box-shadow: 0 0 24px rgb(var(--accent) / .45), 0 0 60px rgb(var(--accent) / .18);
    }
    body.cursor-style-glow .cursor-ring{
      border-color: rgb(var(--accent) / .45);
      background: radial-gradient(circle, rgb(var(--accent) / .14), transparent 62%);
      mix-blend-mode: normal;
      box-shadow: 0 0 55px rgb(var(--accent) / .20);
    }
    body.cursor-on .cursor-dot, body.cursor-on .cursor-ring{ display: block; }

    .no-scroll{ overflow: hidden; }
    .overlay{
      background: rgb(0 0 0 / .66);
      backdrop-filter: blur(6px);
    }

    .skip-link{
      position: absolute;
      left: 12px; top: 12px;
      transform: translateY(-160%);
      background: rgb(var(--surface) / .95);
      border: 1px solid rgb(var(--border-subtle) / .16);
      padding: 10px 12px;
      border-radius: 14px;
      z-index: 999999;
      box-shadow: var(--shadow-1);
      font-weight: 900;
    }
    .skip-link:focus{ transform: translateY(0); }

    /* âœ… ABOUT tabs: scrollable on mobile */
    .tabsRow{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
    }
    @media (max-width: 640px){
      .tabsRow{
        flex-wrap: nowrap;
        overflow-x: auto;
        padding-bottom: 6px;
        -webkit-overflow-scrolling: touch;
      }
      .tabsRow::-webkit-scrollbar{ display:none; }
      .tabsRow .btn{ white-space: nowrap; }
    }

    /* âœ… Make About image sane on mobile */
    #aboutImg{
      max-height: 280px;
      object-fit: cover;
    }
    @media (max-width: 640px){
      #aboutImg{ max-height: 220px; }
    }

    /* âœ… Better section spacing on mobile */
    main{ padding-bottom: 64px; }
    section{ scroll-margin-top: 96px; }

    /* âœ… Project cards & cert cards keep ratio clean */
    .ratio-16-10{ aspect-ratio: 16 / 10; }
    .ratio-16-9{ aspect-ratio: 16 / 9; }

    /* âœ… Modal: mobile sheet behavior */
    .modalShell{
      margin-top: 18px;
    }
    @media (max-width: 640px){
      .modalShell{
        margin-top: 10px;
      }
      .modalBody{
        max-height: 78vh !important;
        padding: 16px !important;
      }
    }

    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; scroll-behavior: auto !important; }
      body.cursor-on{ cursor: auto !important; }
      .cursor-dot,.cursor-ring{ display:none !important; }
    }
  </style>
</head>

<body class="min-h-screen font-sans">
  <a class="skip-link" href="#content">Skip to content</a>

  <div class="bg-grid"></div>
  <div class="bg-noise"></div>

  <!-- PRELOADER -->
  <div id="preloader" aria-hidden="true">
    <div class="text-center">
      <div class="dots justify-center mx-auto" aria-hidden="true">
        <span></span><span></span><span></span>
      </div>
      <p class="mt-5 text-white/80 text-xs tracking-[.28em] uppercase">Preparing experience</p>
    </div>
  </div>

  <!-- Cursor -->
  <div class="cursor-dot" id="cursorDot" aria-hidden="true"></div>
  <div class="cursor-ring" id="cursorRing" aria-hidden="true"></div>

  <!-- Sounds -->
  <audio id="typing-sound" src="src/typesound.mp3" preload="auto"></audio>
  <audio id="nav-hover-sound" src="src/watersplash.mp3" preload="auto"></audio>
  <audio id="service-hover-sound" src="src/Click.mp3" preload="auto"></audio>

  <!-- =======================
      DATA (EDIT HERE ONLY)
  ======================== -->
  <script>
    const DATA = {
      identity: {
        name: "Shah Mehrab Hossain",
        location: "Bangladesh",
        tagline: "Embedded Systems â€¢ Robotics",
        logo: "images/logo.png",
        heroBg: "images/background.jpg",
        heroBgMobile: "images/background1.jpg",
        avatar: "images/one.jpg",
        cv: "file/shahmehrab.pdf",
        email: "admin@shahmehrab.xyz",
        phone: "+8801777961826",
        availability: "Available for collaborations â€¢ Remote / On-site",
      },

      typedRoles: [
        "Embedded Systems Engineer",
        "Robotics (ROS2) Developer",
        "IoT & Sensor Systems Builder",
        "Computer Vision Enthusiast",
        "UI/UX & Brand Designer"
      ],

      highlights: [
        { icon: "fa-solid fa-microchip", title: "Embedded + IoT", desc: "I2C/SPI/UART, PWM, drivers, telemetry, Wi-Fi dashboards." },
        { icon: "fa-solid fa-robot", title: "Robotics (ROS2)", desc: "Gaits, sensor fusion, kinematics, planning, visualization (RViz)." },
        { icon: "fa-solid fa-eye", title: "Computer Vision", desc: "OpenCV + MediaPipe for real-time perception and interaction." },
        { icon: "fa-solid fa-pen-ruler", title: "UI/UX & Design", desc: "Clean hierarchy, modern UI systems, Adobe Suite workflows." }
      ],

      about: {
        title: "About Me",
        paragraphs: [
          "I am a Computer Science & Engineering student passionate about building real-world systems that blend hardware and software. I work with Python, Java, C, C++, and JavaScript, and I enjoy solving practical problems using embedded systems, robotics, and IoT.",
          "I have hands-on experience with robotics platforms (including rover and quadruped prototypes), sensor integration, control logic, and ROS2-based workflows. I also create professional UI/UX designs for dashboards, apps, and product interfaces.",
          "Beyond engineering, I work in graphic design (logos, brand assets, photography) and I enjoy exploring new technologies through hackathons, open-source contributions, and research-style projects."
        ],
        quickStats: [
          { k: "Focus", v: "Embedded â€¢ Robotics â€¢ IoT" },
          { k: "Computer Vision", v: "OpenCV â€¢ MediaPipe" },
          { k: "Design", v: "UI/UX â€¢ Adobe Suite" },
          { k: "University", v: "United International University (UIU)" },
        ]
      },

      skillsGroups: [
        { title: "Programming", items: ["C", "C++", "Python", "Java", "JavaScript", "PHP", "Dart"] },
        { title: "Robotics & Embedded", items: ["ROS2", "Sensor Fusion", "Motor Control", "I2C/SPI/UART", "PWM/Drivers", "Debugging"] },
        { title: "Tools & Platforms", items: ["Arduino", "ESP32", "Raspberry Pi", "MySQL", "Git/GitHub", "VS Code"] },
        { title: "Design", items: ["UI/UX", "Adobe Illustrator", "Photoshop", "Premiere Pro", "3D Design (Blender/Fusion/SolidWorks)"] }
      ],

      skillsIcons: [
        { title: "C", img: "images/skills/c-logo.png" },
        { title: "C++", img: "images/skills/cpp-logo.png" },
        { title: "Python", img: "images/skills/python-logo.png" },
        { title: "Java", img: "images/skills/java-logo.png" },
        { title: "JavaScript", img: "images/skills/javascript-logo.png" },
        { title: "Dart", img: "images/skills/dart-logo.png" },
        { title: "MySQL", img: "images/skills/mysql-logo.png" },
        { title: "PHP", img: "images/skills/php-logo.png" },
        { title: "VS Code", img: "images/skills/vscode-logo.png" },
        { title: "ROS2", img: "images/skills/ros2-logo.png" },
        { title: "Robotics", img: "images/skills/robotics-logo.png" },
        { title: "IoT", img: "images/skills/iot-logo.png" },
        { title: "Embedded", img: "images/skills/embedded-logo.png" },
        { title: "Arduino", img: "images/skills/arduino-logo.png" },
        { title: "GitHub", img: "images/skills/github-logo.png" },
        { title: "Blender", img: "images/skills/blender-logo.png" },
        { title: "Fusion 360", img: "images/skills/fusion360-logo.png" },
        { title: "SolidWorks", img: "images/skills/solidworks-logo.png" },
        { title: "UI/UX", img: "images/skills/uiux-logo.png" },
        { title: "WordPress", img: "images/skills/wordpress-logo.png" },
        { title: "Photoshop", img: "images/skills/photoshop-logo.png" },
        { title: "Illustrator", img: "images/skills/illustrator-logo.png" },
        { title: "Premiere", img: "images/skills/premiere-logo.png" },
      ],

      timeline: [
        { when: "2023 â€” Current", title: "Electrical & Software Team Lead", org: "UIU Mars Rover Team", desc: "Guiding team projects, system integration, and mentoring." },
        { when: "2022 â€” 2023", title: "Mechanical & Fabrication Team Member", org: "UIU Mars Rover Team", desc: "Design + assembly support for rover components and field testing." },
        { when: "2021 â€” Current", title: "UI/UX & Interface Design", org: "XTZ", desc: "Designing web/app interfaces and supporting implementation." }
      ],

      education: [
        { when: "2022 â€” Current", what: "BSc in CSE", where: "United International University (UIU)" },
        { when: "2020", what: "HSC", where: "Brindaban Govt. College" },
        { when: "2018", what: "SSC", where: "Habiganj Govt. High School" },
      ],

      certifications: [
        { year: "2024", title: "URC 2024 â€” University Rover Challenge", img: "images/Cerificates/urc24.jpg" },
        { year: "2023", title: "URC 2023 â€” University Rover Challenge", img: "images/Cerificates/urc23.jpg" },
        { year: "2023", title: "aRC 2023 â€” Anatolian Rover Challenge", img: "images/Cerificates/arc23.jpg" },
        { year: "2022", title: "URC 2022 â€” University Rover Challenge", img: "images/Cerificates/urc23.jpg" },
        { year: "2022", title: "aRC 2022 â€” Anatolian Rover Challenge", img: "images/Cerificates/arc23.jpg" },
      ],

      services: [
        { icon: "fa-solid fa-microchip", title: "Embedded Systems", desc: "Sensors, motor control, protocols, firmware logic, and reliability-first design." },
        { icon: "fa-solid fa-wifi", title: "IoT Solutions", desc: "Telemetry, dashboards, automation, device health, and remote control workflows." },
        { icon: "fa-solid fa-robot", title: "Robotics (ROS2)", desc: "Modular ROS2 nodes, perception pipelines, autonomy, and visualization tooling." },
        { icon: "fa-solid fa-eye", title: "Computer Vision", desc: "Real-time detection & tracking using OpenCV/MediaPipe with optimized pipelines." },
        { icon: "fa-solid fa-crop", title: "UI/UX Design", desc: "Design systems, clean hierarchy, components, and interaction-focused layouts." },
        { icon: "fa-solid fa-draw-polygon", title: "Graphic Design", desc: "Logos, brand assets, social media visuals, and presentation-ready design." },
        { icon: "fa-solid fa-code", title: "Web Development", desc: "Responsive, fast websites with modern UI, clean structure and maintainability." },
        { icon: "fa-solid fa-cube", title: "3D Design", desc: "3D modeling for robotics parts, prototypes, and product visualization." },
      ],

      projects: [
        {
          id: "autax",
          title: "AuTax: A Self-Driving Taxi",
          cover: "images/work/AuTax.png",
          subtitle: "Autonomy concept integrating vision + ROS2 + sensors.",
          tags: ["Robotics", "ROS2", "Computer Vision"],
          modal: {
            intro: "AuTax is an autonomous taxi concept designed to navigate complex urban environments using robotics middleware and real-time perception.",
            youtube: "https://www.youtube.com/embed/TixH0lE5oqY?si=EymC74W6o0SB6848",
            features: [
              "Obstacle detection + avoidance concepts",
              "Route logic + telemetry UI ideas",
              "Perception-first approach for urban scenes",
              "Modular architecture planning"
            ],
            tech: [
              "OpenCV + YOLO (vision ideas)",
              "ROS2 messaging + node layout",
              "LiDAR/Ultrasonic sensing plan",
              "Python + C++"
            ],
            challenges: "Real-time tuning for dynamic scenes, resource budgeting, and safe behavior planning.",
            providesTitle: "What It Provides",
            providesText: "A practical learning platform for autonomy concepts with a clear architecture and test plan.",
            providesList: [
              "Learn ROS2 workflows end-to-end",
              "Build navigation pipelines systematically",
              "Test perception + control strategies",
              "Design safety and failure handling"
            ],
            image: "images/work/AuTax.png"
          }
        },
        {
          id: "robotdog",
          title: "Quadruped Robot Dog (Prototype)",
          cover: "images/work/work-4.png",
          subtitle: "Stable locomotion + sensors + telemetry for inspection use-cases.",
          tags: ["Embedded", "Robotics", "IoT"],
          modal: {
            intro: "A quadruped prototype focused on stable gait control, sensor feedback, and remote monitoring for hazardous environment inspection.",
            features: [
              "IMU-based posture stabilization concept",
              "Gait patterns + motion profiling",
              "Wireless telemetry + dashboard UI",
              "Modular hardware planning for upgrades"
            ],
            tech: ["ESP32 / Raspberry Pi", "ROS2 (high-level)", "IMU + distance sensing", "Web UI + telemetry"],
            challenges: "Balancing stability, power, actuator limits, and clean software modularity for upgrades.",
            image: "images/work/work-4.png"
          }
        },
        {
          id: "iotdash",
          title: "IoT Dashboard UI (Concept)",
          cover: "images/work/work-5.png",
          subtitle: "Device monitoring, alerts, analytics, and history graphs.",
          tags: ["UI/UX", "IoT"],
          modal: {
            intro: "A professional IoT dashboard concept for monitoring sensor streams and device health.",
            extra: ["Status cards + logs + filters", "Alert center with severity", "Device list & quick actions", "Mobile responsive layout"],
            image: "images/work/work-5.png"
          }
        },
        {
          id: "social",
          title: "Social Media App UI",
          cover: "images/work/work-1.png",
          subtitle: "Real-time communication UI concept with clean feed patterns.",
          tags: ["UI/UX"],
          modal: {
            intro: "A modern social UI concept focusing on readability, spacing, and interaction states.",
            image: "images/work/work-2.png",
            extra: ["Clean feed layout", "Profile + messaging patterns", "Mobile-first responsive structure"]
          }
        },
        {
          id: "music",
          title: "Music App UI",
          cover: "images/work/work-2.png",
          subtitle: "Stream tracks, playlists, and discover new music daily.",
          tags: ["UI/UX"],
          modal: {
            intro: "A music UX concept with playlist-first navigation.",
            image: "images/work/work-3.png",
            extra: ["Playlist-focused UX", "Better typography + contrast", "Smooth interaction states"]
          }
        }
      ],

      loadMoreProjects: [
        { id: "gaming", title: "Online Gaming App UI", cover: "images/work/work-3.png", subtitle: "Matchmaking UI concept with ranking & profiles.", tags:["UI/UX"], modal: { intro: "A UI/UX concept focusing on matchmaking, ranking, and profiles." } },
        { id: "multiplayer", title: "Multiplayer Game (Placeholder)", cover: "images/work/work-4.png", subtitle: "Replace with your real project.", tags:["Placeholder"], modal: { intro: "Project card placeholder (replace with real content)." } },
        { id: "snake", title: "Snake Game (Placeholder)", cover: "images/work/work-5.png", subtitle: "Replace with your real project.", tags:["Placeholder"], modal: { intro: "Project card placeholder (replace with real content)." } },
      ],

      socials: [
        { icon: "fab fa-facebook", href: "https://www.facebook.com/shah.mehrab.hossain/", label:"Facebook" },
        { icon: "fa-brands fa-x-twitter", href: "https://twitter.com/", label:"X" },
        { icon: "fab fa-instagram", href: "https://www.instagram.com/smh.009/", label:"Instagram" },
        { icon: "fab fa-linkedin", href: "https://www.linkedin.com/in/shah-mehrab-hossain-a6a1691ba/", label:"LinkedIn" },
        { icon: "fab fa-github", href: "https://github.com/shahm009", label:"GitHub" },
        { icon: "fab fa-stack-overflow", href: "https://stackoverflow.com/users/20249958/shah009", label:"Stack Overflow" }
      ],

      googleScriptURL: "https://script.google.com/macros/s/AKfycbwjMYFVTmh0NAP6JTMf_kPawXRtiZHOcBLp0OOZKQmJgBES_S7jx5rhoA5bzvUu3kRP/exec",

      tracks: [
        { name: "Track 1", url: "src/music/Track1.mp3" },
        { name: "Track 2", url: "src/music/Track2.mp3" },
        { name: "Track 3", url: "src/music/Track3.mp3" }
      ],
    };
  </script>

  <!-- NAV -->
  <header class="navWrap" id="navWrap">
    <div class="containerX py-3">
      <div class="glass px-4 py-3">
        <div class="flex items-center justify-between gap-3">
          <a href="#home" class="flex items-center gap-3 hover:opacity-90 transition">
            <img id="logo" class="h-11 w-11 rounded-2xl object-cover" alt="Logo" />
            <div class="leading-tight">
              <p class="font-black tracking-tight" id="navName"></p>
              <p class="text-xs muted" id="navTagline"></p>
            </div>
          </a>

          <nav class="hidden lg:flex items-center gap-1" aria-label="Primary">
            <a class="navLink" href="#home">Home</a>
            <a class="navLink" href="#about">About</a>
            <a class="navLink" href="#services">Services</a>
            <a class="navLink" href="#portfolio">Portfolio</a>
            <a class="navLink" href="#contact">Contact</a>
          </nav>

          <div class="flex items-center gap-2">
            <!-- Cursor style -->
            <div class="hidden md:flex items-center gap-2 btn px-3 py-2">
              <i class="fa-solid fa-mouse-pointer muted"></i>
              <select id="cursorSelect" class="bg-transparent text-sm font-black outline-none" style="color: rgb(var(--text)); padding: 0;">
                <option value="off">Cursor: Off</option>
                <option value="neo">Cursor: Neo</option>
                <option value="dot">Cursor: Dot</option>
                <option value="ring">Cursor: Ring</option>
                <option value="glow">Cursor: Glow</option>
              </select>
            </div>

            <button id="themeBtn" class="btn px-3 py-2 text-sm font-black" aria-label="Toggle theme">
              <span id="themeIcon">ðŸŒ™</span>
              <span class="hidden sm:inline" id="themeLabel">Theme</span>
            </button>

            <button id="menuBtn" class="lg:hidden btn px-3 py-2" aria-label="Open menu" aria-expanded="false">
              <i class="fa-solid fa-bars"></i>
            </button>
          </div>
        </div>

        <!-- Mobile menu -->
        <div id="mobileMenu" class="hidden lg:hidden mt-3" aria-label="Mobile menu">
          <div class="grid gap-2">
            <a class="btn px-4 py-3" href="#home">Home</a>
            <a class="btn px-4 py-3" href="#about">About</a>
            <a class="btn px-4 py-3" href="#services">Services</a>
            <a class="btn px-4 py-3" href="#portfolio">Portfolio</a>
            <a class="btn px-4 py-3" href="#contact">Contact</a>

            <div class="btn px-4 py-3 flex items-center gap-3">
              <i class="fa-solid fa-mouse-pointer muted"></i>
              <select id="cursorSelectMobile" class="bg-transparent text-sm font-black outline-none" style="color: rgb(var(--text)); width: 100%; padding:0;">
                <option value="off">Cursor: Off</option>
                <option value="neo">Cursor: Neo</option>
                <option value="dot">Cursor: Dot</option>
                <option value="ring">Cursor: Ring</option>
                <option value="glow">Cursor: Glow</option>
              </select>
            </div>
          </div>
        </div>

      </div>
    </div>
  </header>

  <main id="content" class="containerX pt-6 pb-16">
    <!-- HOME -->
    <section id="home" class="reveal">
      <div class="panel p-5 sm:p-6 md:p-10">
        <div class="grid gap-8 lg:grid-cols-12 lg:items-center">
          <div class="lg:col-span-7">
            <div class="flex flex-wrap items-center gap-2">
              <span class="chip"><span class="dot"></span><span id="availability"></span></span>
              <span class="chip"><i class="fa-solid fa-location-dot"></i><span id="heroLocation"></span></span>
            </div>

            <h1 class="mt-5 text-[30px] sm:text-4xl md:text-5xl font-black tracking-[-0.05em] leading-[1.08]">
              Hi, I'm
              <span id="heroName" style="background: linear-gradient(135deg, rgb(var(--accent)), rgb(var(--accent2))); -webkit-background-clip: text; background-clip: text; color: transparent;"></span>.
            </h1>

            <p class="mt-4 text-base sm:text-lg md:text-xl font-extrabold leading-snug">
              <span class="muted">I build</span>
              <span id="typedText" class="ml-2"></span>
              <span class="ml-1 opacity-60" id="typingCursor" aria-hidden="true">|</span>
            </p>

            <p class="mt-4 text-sm sm:text-base md:text-base leading-relaxed" style="color: rgb(var(--text) / .92)">
              I design and develop real systems combining <b>embedded engineering</b>, <b>robotics (ROS2)</b>, <b>IoT telemetry</b>, and <b>computer vision</b>.
              I also create premium <b>UI/UX</b> that looks modern and feels fast.
            </p>

            <div class="mt-6 flex flex-wrap gap-3">
              <a href="#portfolio" class="btn btn-primary">
                View Portfolio <i class="fa-solid fa-arrow-right"></i>
              </a>
              <a href="#contact" class="btn">
                Contact Me <i class="fa-solid fa-paper-plane"></i>
              </a>
              <a id="cvBtnTop" class="btn" download>
                Download CV <i class="fa-solid fa-download"></i>
              </a>
            </div>

            <div class="mt-6 flex flex-wrap gap-2" id="heroChips"></div>
          </div>

          <div class="lg:col-span-5">
            <div class="avatarRing p-4 sm:p-5 md:p-6">
              <div class="relative">
                <div class="relative rounded-[24px] overflow-hidden">
                  <div id="heroBg" class="absolute inset-0 bg-cover bg-center opacity-[.20]"></div>
                  <div class="absolute inset-0" style="background: linear-gradient(180deg, rgb(0 0 0 / .10), rgb(0 0 0 / .20));"></div>

                  <div class="relative p-4 sm:p-5">
                    <div class="flex items-center gap-4">
                      <img id="avatar" class="h-14 w-14 sm:h-16 sm:w-16 rounded-2xl object-cover" alt="Avatar" />
                      <div class="flex-1 min-w-0">
                        <p class="font-black text-base sm:text-lg truncate" id="cardName"></p>
                        <p class="text-sm muted truncate" id="cardTagline"></p>
                      </div>
                      <div class="h-11 w-11 rounded-2xl grid place-items-center" style="background: rgb(var(--accent) / .14)">
                        <i class="fa-solid fa-bolt" style="color: rgb(var(--accent))"></i>
                      </div>
                    </div>

                    <div class="mt-5 grid grid-cols-2 gap-3" id="heroStats"></div>

                    <!-- Music Player -->
                    <div class="mt-5 card p-4">
                      <p class="text-xs muted mb-2">Music Player</p>
                      <div class="flex items-center gap-3 flex-wrap">
                        <button id="prevBtn" class="btn px-3 py-2" aria-label="Previous track">
                          <i class="fa-solid fa-backward"></i>
                        </button>

                        <button id="playBtn" class="btn btn-primary px-4 py-2" aria-label="Play or pause">
                          <i id="playIcon" class="fa-solid fa-play"></i>
                          <i id="pauseIcon" class="fa-solid fa-pause hidden"></i>
                          <span class="ml-1">Play</span>
                        </button>

                        <button id="nextBtn" class="btn px-3 py-2" aria-label="Next track">
                          <i class="fa-solid fa-forward"></i>
                        </button>

                        <div class="ml-auto text-right min-w-0">
                          <p class="text-xs muted">Now Playing</p>
                          <p class="text-sm font-black truncate max-w-[170px]" id="trackName">Track</p>
                        </div>
                      </div>
                      <audio id="player" preload="auto"></audio>
                    </div>

                  </div>
                </div>
              </div>
            </div>

            <div class="mt-4 grid gap-3 sm:grid-cols-2">
              <a id="emailLink" class="btn w-full" href="#"><i class="fa-solid fa-envelope"></i><span id="emailText" class="truncate"></span></a>
              <a id="phoneLink" class="btn w-full" href="#"><i class="fa-solid fa-phone"></i><span id="phoneText" class="truncate"></span></a>
            </div>

            <div class="mt-4 flex flex-wrap gap-2" id="socialLinks"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="mt-10 reveal">
      <div class="panel p-5 sm:p-6 md:p-10">
        <div class="flex items-end justify-between flex-wrap gap-3">
          <div class="min-w-0">
            <div class="kicker"><span class="dot"></span> profile</div>
            <h2 class="h2 mt-3" id="aboutTitle"></h2>
            <p class="mt-3 text-sm md:text-base muted">
              Clean, detailed, and easy to expand with new projects and achievements.
            </p>
          </div>

          <!-- âœ… Tabs improved -->
          <div class="tabsRow">
            <button class="tabBtn btn px-4 py-2 text-sm" data-tab="skillsTab"><i class="fa-solid fa-layer-group"></i>Skills</button>
            <button class="tabBtn btn px-4 py-2 text-sm" data-tab="timelineTab"><i class="fa-solid fa-timeline"></i>Timeline</button>
            <button class="tabBtn btn px-4 py-2 text-sm" data-tab="educationTab"><i class="fa-solid fa-graduation-cap"></i>Education</button>
            <button class="tabBtn btn px-4 py-2 text-sm" data-tab="certTab"><i class="fa-solid fa-award"></i>Certificates</button>
          </div>
        </div>

        <!-- âœ… About layout improved: better hierarchy & mobile flow -->
        <div class="mt-7 grid gap-6 lg:grid-cols-12 lg:items-start">
          <!-- Left column -->
          <div class="lg:col-span-4">
            <div class="card p-5">
              <img id="aboutImg" class="w-full rounded-2xl object-cover" alt="About photo">
              <div class="mt-4 grid grid-cols-2 gap-3" id="quickStats"></div>
            </div>

            <div class="mt-4 card p-5">
              <p class="text-xs muted">Core strengths</p>
              <div class="mt-3 grid gap-3" id="highlights"></div>
            </div>
          </div>

          <!-- Right column -->
          <div class="lg:col-span-8">
            <div class="card p-5 sm:p-6 md:p-7">
              <div class="space-y-4 text-sm sm:text-base leading-relaxed" id="aboutParagraphs"></div>
            </div>

            <div class="mt-5">
              <div id="skillsTab" class="tabPanel">
                <div class="card p-5 sm:p-6 md:p-7">
                  <div class="grid gap-5 md:grid-cols-2">
                    <div>
                      <p class="text-sm muted">Skill icons</p>
                      <div class="mt-3 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-4 gap-1" id="skillsGrid"></div>
                    </div>
                    <div>
                      <p class="text-sm muted">Skill groups</p>
                      <div class="mt-4 grid gap-3" id="skillsGroups"></div>
                    </div>
                  </div>
                </div>
              </div>

              <div id="timelineTab" class="tabPanel hidden">
                <div class="card p-5 sm:p-6 md:p-7">
                  <div class="space-y-3" id="timelineList"></div>
                </div>
              </div>

              <div id="educationTab" class="tabPanel hidden">
                <div class="card p-5 sm:p-6 md:p-7">
                  <div class="space-y-3" id="educationList"></div>
                </div>
              </div>

              <div id="certTab" class="tabPanel hidden">
                <div class="card p-5 sm:p-6 md:p-7">
                  <p class="text-sm muted mb-4">Click to preview certificates.</p>
                  <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3" id="certGrid"></div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </section>

    <!-- SERVICES -->
    <section id="services" class="mt-10 reveal">
      <div class="panel p-5 sm:p-6 md:p-10">
        <div class="flex items-end justify-between flex-wrap gap-3">
          <div class="min-w-0">
            <div class="kicker"><span class="dot"></span> services</div>
            <h2 class="h2 mt-3">What I Can Do</h2>
            <p class="mt-3 text-sm md:text-base muted">High quality, production-ready outcomes with strong communication.</p>
          </div>
          <span class="chip"><i class="fa-solid fa-wand-magic-sparkles"></i>Hover for details</span>
        </div>

        <div class="mt-7 grid gap-4 sm:grid-cols-2 lg:grid-cols-4" id="servicesGrid"></div>
      </div>
    </section>

    <!-- PORTFOLIO -->
    <section id="portfolio" class="mt-10 reveal">
      <div class="panel p-5 sm:p-6 md:p-10">
        <div class="flex items-end justify-between flex-wrap gap-3">
          <div class="min-w-0">
            <div class="kicker"><span class="dot"></span> portfolio</div>
            <h2 class="h2 mt-3">Selected Work</h2>
            <p class="mt-3 text-sm md:text-base muted">Search + filters + detailed modals.</p>
          </div>

          <div class="flex flex-wrap gap-2 items-center w-full sm:w-auto">
            <input id="searchProjects" class="text-sm w-full sm:w-[220px] md:w-[280px]" placeholder="Search projectsâ€¦" aria-label="Search projects"/>
            <select id="filterTag" class="text-sm font-black w-full sm:w-auto" aria-label="Filter projects">
              <option value="all">Filter: All</option>
            </select>
            <button id="loadMoreBtn" class="btn px-5 py-3 w-full sm:w-auto" aria-label="Load more projects">
              See more
            </button>
          </div>
        </div>

        <div class="mt-7 grid gap-4 sm:grid-cols-2 lg:grid-cols-3" id="projectsGrid"></div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="mt-10 pb-16 reveal">
      <div class="panel p-5 sm:p-6 md:p-10">
        <div class="grid gap-6 lg:grid-cols-12">
          <div class="lg:col-span-5">
            <div class="kicker"><span class="dot"></span> contact</div>
            <h2 class="h2 mt-3">Letâ€™s Build Something</h2>
            <p class="mt-3 text-sm md:text-base muted">
              Send a short message. I reply with clear steps and realistic timelines.
            </p>

            <div class="mt-6 space-y-3">
              <a id="emailLink2" class="btn w-full" href="#"><i class="fa-solid fa-paper-plane"></i><span id="emailText2" class="truncate"></span></a>
              <a id="phoneLink2" class="btn w-full" href="#"><i class="fa-solid fa-phone"></i><span id="phoneText2" class="truncate"></span></a>

              <a id="cvBtn" class="btn btn-primary w-full" style="justify-content:center" download>
                <i class="fa-solid fa-download"></i> Download CV
              </a>

              <p class="text-xs muted mt-2">Tip: Add your project idea + deadline + budget (if any) for a faster response.</p>
            </div>
          </div>

          <div class="lg:col-span-7">
            <div class="card p-5 sm:p-6 md:p-7">
              <div class="flex items-start justify-between gap-4 flex-wrap">
                <div>
                  <h3 class="h3">Send a Message</h3>
                  <p class="mt-2 text-sm muted">Connected to your Google Script.</p>
                </div>
                <span class="chip"><i class="fa-solid fa-shield"></i>Sanitized input</span>
              </div>

              <form id="contactForm" class="mt-5 space-y-4" autocomplete="on" novalidate>
                <div style="position:absolute; left:-9999px; top:-9999px;" aria-hidden="true">
                  <label>Website</label>
                  <input type="text" name="Website" tabindex="-1" autocomplete="off">
                </div>

                <div class="grid gap-4 md:grid-cols-2">
                  <input class="text-sm w-full" type="text" name="Name" placeholder="Your Name" required>
                  <input class="text-sm w-full" type="email" name="Email" placeholder="Your Email" required>
                </div>

                <textarea class="text-sm w-full" name="Message" rows="6" placeholder="Your Message" required></textarea>

                <button id="submitBtn" class="btn btn-primary w-full" style="justify-content:center" type="submit">
                  Submit <i class="fa-solid fa-paper-plane"></i>
                </button>

                <p id="formMsg" class="text-sm muted" role="status" aria-live="polite"></p>
              </form>
            </div>
          </div>
        </div>

        <div class="mt-10 border-t pt-6 text-center text-sm muted" style="border-color: rgb(var(--border-strong) / .12);">
          Â© <span id="year"></span> <span class="font-black" style="color: rgb(var(--text));" id="copyrightName"></span>.
          All rights reserved.
        </div>
      </div>
    </section>
  </main>

  <!-- Back to top -->
  <button id="backTop" class="fixed bottom-5 right-5 hidden btn px-4 py-3" aria-label="Back to top">
    <i class="fa-solid fa-arrow-up"></i>
  </button>

  <!-- PROJECT MODAL -->
  <div id="projectModal" class="fixed inset-0 hidden z-[999]" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalIntro">
    <div id="modalOverlay" class="absolute inset-0 overlay" tabindex="-1" aria-hidden="true"></div>
    <div class="relative mx-auto max-w-4xl px-4 modalShell">
      <div class="panel overflow-hidden">
        <div class="flex items-center justify-between p-4 sm:p-5 border-b" style="border-color: rgb(var(--border-strong) / .12);">
          <div class="min-w-0">
            <p class="text-xs muted">Project Details</p>
            <h3 id="modalTitle" class="text-lg md:text-xl font-black truncate"></h3>
          </div>
          <button id="modalClose" class="btn px-3 py-2" aria-label="Close project dialog">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <div class="p-6 md:p-7 space-y-6 max-h-[80vh] overflow-y-auto modalBody">
          <p id="modalIntro" class="text-sm md:text-base leading-relaxed" style="color: rgb(var(--text) / .92)"></p>

          <div id="modalVideoWrap" class="hidden">
            <div class="card overflow-hidden">
              <div class="ratio-16-9">
                <iframe id="modalVideo" class="w-full h-full"
                  src="" title="YouTube video player" frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  allowfullscreen></iframe>
              </div>
            </div>
          </div>

          <div id="modalSections" class="space-y-5"></div>
          <img id="modalImage" class="w-full rounded-2xl object-cover hidden" alt="Project image">
        </div>
      </div>
    </div>
  </div>

  <!-- CERT MODAL -->
  <div id="certModal" class="fixed inset-0 hidden z-[999]" role="dialog" aria-modal="true" aria-labelledby="certTitle">
    <div id="certOverlay" class="absolute inset-0 overlay" tabindex="-1" aria-hidden="true"></div>
    <div class="relative mx-auto max-w-5xl px-4 modalShell">
      <div class="panel overflow-hidden">
        <div class="flex items-center justify-between p-4 border-b" style="border-color: rgb(var(--border-strong) / .12);">
          <p id="certTitle" class="font-black truncate"></p>
          <button id="certClose" class="btn px-3 py-2" aria-label="Close certificate dialog">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <img id="certImg" class="w-full object-contain max-h-[85vh]" alt="Certificate">
      </div>
    </div>
  </div>

  <script>
    /* THEME */
    const htmlEl = document.documentElement;
    const themeIcon = document.getElementById("themeIcon");
    const themeLabel = document.getElementById("themeLabel");

    function applyTheme(mode){
      document.body.classList.add("theme-transition");
      const isDark = mode === "dark";
      htmlEl.classList.toggle("dark", isDark);
      htmlEl.setAttribute("data-theme", mode);

      themeIcon.textContent = isDark ? "â˜€ï¸" : "ðŸŒ™";
      themeLabel.textContent = isDark ? "Light" : "Dark";

      localStorage.setItem("theme", mode);
      setTimeout(() => document.body.classList.remove("theme-transition"), 280);
    }

    const mql = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)");
    const prefersDark = !!(mql && mql.matches);
    const storedTheme = localStorage.getItem("theme");
    applyTheme(storedTheme || (prefersDark ? "dark" : "light"));

    document.getElementById("themeBtn").addEventListener("click", () => {
      const current = localStorage.getItem("theme") || (prefersDark ? "dark" : "light");
      applyTheme(current === "dark" ? "light" : "dark");
    });

    if(mql && mql.addEventListener){
      mql.addEventListener("change", (e) => {
        if(!localStorage.getItem("theme")) applyTheme(e.matches ? "dark" : "light");
      });
    }

    /* Preloader */
    window.addEventListener("load", () => {
      setTimeout(() => document.getElementById("preloader").classList.add("hidden"), 450);
    });

    /* âœ… Navbar compact on scroll */
    const navWrap = document.getElementById("navWrap");
    window.addEventListener("scroll", () => {
      navWrap.classList.toggle("navCompact", window.scrollY > 40);
    });

    /* Mobile Menu */
    const menuBtn = document.getElementById("menuBtn");
    const mobileMenu = document.getElementById("mobileMenu");
    function setMenu(open){
      mobileMenu.classList.toggle("hidden", !open);
      menuBtn.setAttribute("aria-expanded", open ? "true" : "false");
    }
    menuBtn.addEventListener("click", () => setMenu(mobileMenu.classList.contains("hidden")));
    mobileMenu.querySelectorAll("a").forEach(a => a.addEventListener("click", () => setMenu(false)));
    document.addEventListener("click", (e) => {
      if(mobileMenu.classList.contains("hidden")) return;
      if(!mobileMenu.contains(e.target) && !menuBtn.contains(e.target)) setMenu(false);
    });

    /* Sounds */
    const navSound = document.getElementById("nav-hover-sound");
    const srvSound = document.getElementById("service-hover-sound");
    navSound.volume = 0.07;
    srvSound.volume = 0.30;
    function playSafe(audio){ try { audio.currentTime = 0; audio.play(); } catch(e){} }

    /* Render Identity */
    const id = DATA.identity;
    document.getElementById("logo").src = id.logo;
    document.getElementById("navName").textContent = id.name;
    document.getElementById("navTagline").textContent = id.tagline;

    document.getElementById("heroName").textContent = id.name;
    document.getElementById("heroLocation").textContent = id.location;
    document.getElementById("availability").textContent = id.availability;

    document.getElementById("avatar").src = id.avatar;
    document.getElementById("cardName").textContent = id.name;
    document.getElementById("cardTagline").textContent = id.tagline;

    const heroBg = document.getElementById("heroBg");
    const isMobile = window.matchMedia("(max-width: 700px)").matches;
    heroBg.style.backgroundImage = `url('${isMobile ? id.heroBgMobile : id.heroBg}')`;

    document.getElementById("cvBtn").href = id.cv;
    document.getElementById("cvBtnTop").href = id.cv;

    const setContactLinks = () => {
      const email = id.email;
      const phone = id.phone;

      document.getElementById("emailText").textContent = email;
      document.getElementById("emailLink").href = `mailto:${email}`;

      document.getElementById("phoneText").textContent = phone;
      document.getElementById("phoneLink").href = `tel:${phone.replaceAll(" ", "")}`;

      document.getElementById("emailText2").textContent = email;
      document.getElementById("emailLink2").href = `mailto:${email}`;

      document.getElementById("phoneText2").textContent = phone;
      document.getElementById("phoneLink2").href = `tel:${phone.replaceAll(" ", "")}`;
    };
    setContactLinks();

    document.getElementById("year").textContent = new Date().getFullYear();
    document.getElementById("copyrightName").textContent = id.name;

    /* Socials */
    const socialWrap = document.getElementById("socialLinks");
    DATA.socials.forEach(s => {
      const a = document.createElement("a");
      a.href = s.href;
      a.target = "_blank";
      a.rel = "noreferrer";
      a.className = "btn px-4 py-3";
      a.setAttribute("aria-label", s.label);
      a.innerHTML = `<i class="${s.icon}"></i>`;
      socialWrap.appendChild(a);
    });

    /* Hero chips */
    const heroChips = document.getElementById("heroChips");
    const chipList = ["ROS2 â€¢ Robotics", "Embedded â€¢ IoT", "OpenCV â€¢ MediaPipe", "UI/UX â€¢ Adobe Suite"];
    chipList.forEach(t => {
      const span = document.createElement("span");
      span.className = "chip";
      span.innerHTML = `<i class="fa-solid fa-check" style="color: rgb(var(--accent))"></i><span>${t}</span>`;
      heroChips.appendChild(span);
    });

    /* Hero small stats */
    const heroStats = document.getElementById("heroStats");
    const stats = [
      { k: "Main Stack", v: "C/C++ â€¢ Python" },
      { k: "Robotics", v: "ROS2 â€¢ Sensors" },
      { k: "Design", v: "UI/UX â€¢ Branding" },
      { k: "IoT", v: "Wi-Fi â€¢ Dashboards" },
    ];
    stats.forEach(s => {
      const div = document.createElement("div");
      div.className = "card p-4";
      div.innerHTML = `<p class="text-xs muted">${s.k}</p><p class="mt-1 font-black">${s.v}</p>`;
      heroStats.appendChild(div);
    });

    /* About */
    document.getElementById("aboutTitle").textContent = DATA.about.title;
    document.getElementById("aboutImg").src = id.avatar;

    const aboutP = document.getElementById("aboutParagraphs");
    DATA.about.paragraphs.forEach(p => {
      const el = document.createElement("p");
      el.textContent = p;
      aboutP.appendChild(el);
    });

    const statsWrap = document.getElementById("quickStats");
    DATA.about.quickStats.forEach(s => {
      const card = document.createElement("div");
      card.className = "card p-4";
      card.innerHTML = `<p class="text-xs muted">${s.k}</p><p class="mt-1 font-black">${s.v}</p>`;
      statsWrap.appendChild(card);
    });

    const highlights = document.getElementById("highlights");
    DATA.highlights.forEach(h => {
      const row = document.createElement("div");
      row.className = "card p-4 flex gap-3 items-start";
      row.innerHTML = `
        <div class="h-10 w-10 rounded-2xl grid place-items-center" style="background: rgb(var(--accent) / .14)">
          <i class="${h.icon}" style="color: rgb(var(--accent))"></i>
        </div>
        <div>
          <p class="font-black">${h.title}</p>
          <p class="text-sm muted mt-1">${h.desc}</p>
        </div>
      `;
      highlights.appendChild(row);
    });

    /* Tabs */
    const tabBtns = document.querySelectorAll(".tabBtn");
    const tabPanels = document.querySelectorAll(".tabPanel");
    function openTab(tabId){
      tabPanels.forEach(p => p.classList.add("hidden"));
      document.getElementById(tabId).classList.remove("hidden");
      tabBtns.forEach(b => b.style.boxShadow = "none");
      const activeBtn = [...tabBtns].find(x => x.dataset.tab === tabId);
      if(activeBtn) activeBtn.style.boxShadow = "0 0 0 6px rgb(var(--accent) / .14)";
    }
    tabBtns.forEach(btn => btn.addEventListener("click", () => openTab(btn.dataset.tab)));
    openTab("skillsTab");

    /* Skills */
    const skillsGrid = document.getElementById("skillsGrid");
    DATA.skillsIcons.forEach(s => {
      const item = document.createElement("div");
      item.className = "card p-3 grid place-items-center";
      item.title = s.title;
      item.innerHTML = `
        <img src="${s.img}" alt="${s.title}" class="h-10 w-10 object-contain">
        <p class="mt-2 text-[11px] font-black text-center muted">${s.title}</p>
      `;
      skillsGrid.appendChild(item);
    });

    const skillsGroups = document.getElementById("skillsGroups");
    DATA.skillsGroups.forEach(g => {
      const block = document.createElement("div");
      block.className = "card p-5";
      block.innerHTML = `
        <p class="font-black">${g.title}</p>
        <p class="text-sm muted mt-2">${g.items.join(" â€¢ ")}</p>
      `;
      skillsGroups.appendChild(block);
    });

    /* Timeline + Education */
    const timelineWrap = document.getElementById("timelineList");
    DATA.timeline.forEach(t => {
      const card = document.createElement("div");
      card.className = "card p-5";
      card.innerHTML = `
        <p class="text-xs muted">${t.when}</p>
        <p class="mt-1 font-black">${t.title}</p>
        <p class="mt-1 text-sm" style="color: rgb(var(--text) / .92)">${t.org}</p>
        <p class="mt-2 text-sm muted">${t.desc}</p>
      `;
      timelineWrap.appendChild(card);
    });

    const eduWrap = document.getElementById("educationList");
    DATA.education.forEach(e => {
      const card = document.createElement("div");
      card.className = "card p-5";
      card.innerHTML = `
        <p class="text-xs muted">${e.when}</p>
        <p class="mt-1 font-black">${e.what}</p>
        <p class="mt-2 text-sm" style="color: rgb(var(--text) / .92)">${e.where}</p>
      `;
      eduWrap.appendChild(card);
    });

    /* Certificates */
    const certGrid = document.getElementById("certGrid");
    const certModal = document.getElementById("certModal");
    const certOverlay = document.getElementById("certOverlay");
    const certClose = document.getElementById("certClose");
    const certImg = document.getElementById("certImg");
    const certTitle = document.getElementById("certTitle");
    let lastFocusEl = null;
    function lockScroll(lock){ document.body.classList.toggle("no-scroll", lock); }
    function openCert(c, opener){
      lastFocusEl = opener || document.activeElement;
      certTitle.textContent = `${c.year} â€” ${c.title}`;
      certImg.src = c.img;
      certModal.classList.remove("hidden");
      lockScroll(true);
      setTimeout(() => certClose.focus(), 0);
    }
    function closeCert(){
      certModal.classList.add("hidden");
      certImg.src = "";
      lockScroll(false);
      if(lastFocusEl && typeof lastFocusEl.focus === "function") lastFocusEl.focus();
      lastFocusEl = null;
    }
    certOverlay.addEventListener("click", closeCert);
    certClose.addEventListener("click", closeCert);

    DATA.certifications.forEach(c => {
      const card = document.createElement("button");
      card.type = "button";
      card.className = "text-left card hover:scale-[1.01] transition";
      card.innerHTML = `
        <div class="ratio-16-10 overflow-hidden">
          <img src="${c.img}" alt="${c.title}" class="w-full h-full object-cover">
        </div>
        <div class="p-5">
          <p class="text-xs muted">${c.year}</p>
          <p class="mt-1 font-black">${c.title}</p>
        </div>
      `;
      card.addEventListener("click", (e) => openCert(c, e.currentTarget));
      certGrid.appendChild(card);
    });

    /* Services */
    const servicesGrid = document.getElementById("servicesGrid");
    document.querySelectorAll(".navLink").forEach(link => link.addEventListener("pointerenter", () => playSafe(navSound)));
    DATA.services.forEach(s => {
      const card = document.createElement("div");
      card.className = "card p-6 hover:scale-[1.01] transition cursor-pointer";
      card.innerHTML = `
        <div class="h-12 w-12 rounded-2xl grid place-items-center mb-4" style="background: rgb(var(--accent) / .14)">
          <i class="${s.icon}" style="color: rgb(var(--accent))"></i>
        </div>
        <h3 class="font-black text-lg">${s.title}</h3>
        <p class="mt-2 text-sm leading-relaxed muted">${s.desc}</p>
        <a class="mt-4 inline-flex items-center gap-2 text-sm font-black hover:opacity-80"
          href="#contact" style="color: rgb(var(--accent))">
          Learn more <i class="fa-solid fa-arrow-right"></i>
        </a>
      `;
      card.addEventListener("pointerenter", () => playSafe(srvSound));
      servicesGrid.appendChild(card);
    });

    /* Projects */
    const projectsGrid = document.getElementById("projectsGrid");
    const searchProjects = document.getElementById("searchProjects");
    const loadMoreBtn = document.getElementById("loadMoreBtn");
    const filterTag = document.getElementById("filterTag");

    let loadedMore = false;
    function currentProjects(){
      return loadedMore ? [...DATA.projects, ...DATA.loadMoreProjects] : [...DATA.projects];
    }

    function buildTagOptions(){
      const set = new Set();
      [...DATA.projects, ...DATA.loadMoreProjects].forEach(p => (p.tags || []).forEach(t => set.add(t)));
      [...set].sort().forEach(t => {
        const opt = document.createElement("option");
        opt.value = t;
        opt.textContent = `Filter: ${t}`;
        filterTag.appendChild(opt);
      });
    }
    buildTagOptions();

    /* Project Modal */
    const projectModal = document.getElementById("projectModal");
    const modalOverlay = document.getElementById("modalOverlay");
    const modalClose = document.getElementById("modalClose");
    const modalTitle = document.getElementById("modalTitle");
    const modalIntro = document.getElementById("modalIntro");
    const modalSections = document.getElementById("modalSections");
    const modalVideoWrap = document.getElementById("modalVideoWrap");
    const modalVideo = document.getElementById("modalVideo");
    const modalImage = document.getElementById("modalImage");

    function getFocusable(container){
      return [...container.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])')]
        .filter(el => el.offsetParent !== null);
    }

    function trapFocus(e, container){
      if(e.key !== "Tab") return;
      const focusables = getFocusable(container);
      if(!focusables.length) return;
      const first = focusables[0];
      const last = focusables[focusables.length - 1];
      if(e.shiftKey && document.activeElement === first){
        e.preventDefault(); last.focus();
      }else if(!e.shiftKey && document.activeElement === last){
        e.preventDefault(); first.focus();
      }
    }

    function sectionList(title, items){
      const wrap = document.createElement("div");
      wrap.className = "card p-5";
      wrap.innerHTML = `<h4 class="font-black text-base mb-3">${title}</h4>`;
      const ul = document.createElement("ul");
      ul.className = "grid gap-2 md:grid-cols-2 text-sm";
      items.forEach(it => {
        const li = document.createElement("li");
        li.className = "card px-4 py-3";
        li.style.borderRadius = "18px";
        li.innerHTML = `<i class="fa-solid fa-check mr-2" style="color: rgb(var(--accent))"></i>${it}`;
        ul.appendChild(li);
      });
      wrap.appendChild(ul);
      return wrap;
    }

    function sectionText(title, text){
      const wrap = document.createElement("div");
      wrap.className = "card p-5";
      wrap.innerHTML = `<h4 class="font-black text-base">${title}</h4>
                        <p class="mt-2 text-sm leading-relaxed muted">${text}</p>`;
      return wrap;
    }

    function openProject(p, opener){
      lastFocusEl = opener || document.activeElement;

      modalTitle.textContent = p.title;
      modalIntro.textContent = p.modal?.intro || p.subtitle || "";

      modalSections.innerHTML = "";
      modalImage.classList.add("hidden");
      modalVideoWrap.classList.add("hidden");
      modalVideo.src = "";

      if(p.modal?.youtube){
        modalVideoWrap.classList.remove("hidden");
        modalVideo.src = p.modal.youtube;
      }

      if(p.modal?.features?.length) modalSections.appendChild(sectionList("Key Features", p.modal.features));
      if(p.modal?.tech?.length) modalSections.appendChild(sectionList("Technologies Used", p.modal.tech));
      if(p.modal?.challenges) modalSections.appendChild(sectionText("Challenges", p.modal.challenges));
      if(p.modal?.providesTitle || p.modal?.providesText){
        modalSections.appendChild(sectionText(p.modal.providesTitle || "What It Provides", p.modal.providesText || ""));
      }
      if(p.modal?.providesList?.length) modalSections.appendChild(sectionList("Benefits", p.modal.providesList));
      if(p.modal?.extra?.length) modalSections.appendChild(sectionList("Highlights", p.modal.extra));

      if(p.modal?.image){
        modalImage.src = p.modal.image;
        modalImage.classList.remove("hidden");
      }

      projectModal.classList.remove("hidden");
      lockScroll(true);
      setTimeout(() => modalClose.focus(), 0);
    }

    function closeProject(){
      projectModal.classList.add("hidden");
      modalVideo.src = "";
      lockScroll(false);
      if(lastFocusEl && typeof lastFocusEl.focus === "function") lastFocusEl.focus();
      lastFocusEl = null;
    }

    modalOverlay.addEventListener("click", closeProject);
    modalClose.addEventListener("click", closeProject);
    projectModal.addEventListener("keydown", (e) => trapFocus(e, projectModal));
    certModal.addEventListener("keydown", (e) => trapFocus(e, certModal));

    window.addEventListener("keydown", (e) => {
      if(e.key === "Escape") {
        closeProject();
        closeCert();
        setMenu(false);
      }
    });

    function renderProjects(){
      const q = (searchProjects.value || "").trim().toLowerCase();
      const tag = filterTag.value;

      projectsGrid.innerHTML = "";

      const list = currentProjects().filter(p => {
        const text = (p.title + " " + p.subtitle + " " + (p.tags || []).join(" ")).toLowerCase();
        const matchesQ = !q || text.includes(q);
        const matchesTag = (tag === "all") || (p.tags || []).includes(tag);
        return matchesQ && matchesTag;
      });

      list.forEach(p => {
        const card = document.createElement("button");
        card.type = "button";
        card.className = "text-left card hover:scale-[1.01] transition";
        const tagsHtml = (p.tags || []).slice(0,3).map(t => `<span class="chip" style="padding:6px 10px; font-size:11px;">${t}</span>`).join("");
        card.innerHTML = `
          <div class="ratio-16-10 overflow-hidden">
            <img src="${p.cover}" alt="${p.title}" class="w-full h-full object-cover">
          </div>
          <div class="p-5">
            <div class="flex flex-wrap gap-2 mb-3">${tagsHtml}</div>
            <h3 class="font-black text-lg">${p.title}</h3>
            <p class="mt-2 text-sm muted">${p.subtitle}</p>
            <div class="mt-4 inline-flex items-center gap-2 text-sm font-black" style="color: rgb(var(--accent))">
              View Details <i class="fa-solid fa-up-right-from-square"></i>
            </div>
          </div>
        `;
        card.addEventListener("click", (e) => openProject(p, e.currentTarget));
        projectsGrid.appendChild(card);
      });

      if(!list.length){
        const empty = document.createElement("div");
        empty.className = "card p-7 text-sm";
        empty.style.color = "rgb(var(--muted))";
        empty.textContent = "No projects found. Try another keyword or filter.";
        projectsGrid.appendChild(empty);
      }
    }

    searchProjects.addEventListener("input", renderProjects);
    filterTag.addEventListener("change", renderProjects);

    loadMoreBtn.addEventListener("click", () => {
      loadedMore = !loadedMore;
      loadMoreBtn.textContent = loadedMore ? "Show less" : "See more";
      renderProjects();
    });

    renderProjects();

    /* Typed roles */
    const typedEl = document.getElementById("typedText");
    const typingSound = document.getElementById("typing-sound");
    typingSound.volume = 0.08;
    let roleIndex = 0, charIndex = 0, deleting = false;
    const typeSpeed = 46, deleteSpeed = 24, pause = 900;
    let soundCounter = 0;

    function maybeTypeSound(){
      soundCounter = (soundCounter + 1) % 3;
      if(soundCounter === 0) playSafe(typingSound);
    }

    function tick(){
      const role = DATA.typedRoles[roleIndex];
      if(!deleting){
        typedEl.textContent = role.slice(0, charIndex++);
        maybeTypeSound();
        if(charIndex > role.length){
          deleting = true;
          setTimeout(tick, pause);
          return;
        }
        setTimeout(tick, typeSpeed);
      } else {
        typedEl.textContent = role.slice(0, charIndex--);
        if(charIndex < 0){
          deleting = false;
          roleIndex = (roleIndex + 1) % DATA.typedRoles.length;
          charIndex = 0;
        }
        setTimeout(tick, deleteSpeed);
      }
    }
    tick();

    /* Music player */
    const player = document.getElementById("player");
    const trackName = document.getElementById("trackName");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const playBtn = document.getElementById("playBtn");
    const playIcon = document.getElementById("playIcon");
    const pauseIcon = document.getElementById("pauseIcon");

    let tIndex = 0;
    function loadTrack(i){
      const t = DATA.tracks[i];
      player.src = t.url;
      trackName.textContent = t.name;
    }
    loadTrack(tIndex);

    function setPlayUI(isPlaying){
      if(isPlaying){
        playIcon.classList.add("hidden");
        pauseIcon.classList.remove("hidden");
      }else{
        playIcon.classList.remove("hidden");
        pauseIcon.classList.add("hidden");
      }
    }

    async function togglePlay(){
      try{
        if(player.paused){
          await player.play();
          setPlayUI(true);
        }else{
          player.pause();
          setPlayUI(false);
        }
      }catch(e){}
    }

    async function prevTrack(){
      tIndex = (tIndex - 1 + DATA.tracks.length) % DATA.tracks.length;
      loadTrack(tIndex);
      try{ await player.play(); setPlayUI(true); }catch(e){}
    }
    async function nextTrack(){
      tIndex = (tIndex + 1) % DATA.tracks.length;
      loadTrack(tIndex);
      try{ await player.play(); setPlayUI(true); }catch(e){}
    }

    playBtn.addEventListener("click", togglePlay);
    prevBtn.addEventListener("click", prevTrack);
    nextBtn.addEventListener("click", nextTrack);
    player.addEventListener("ended", nextTrack);

    /* Contact form */
    const form = document.getElementById("contactForm");
    const formMsg = document.getElementById("formMsg");
    const submitBtn = document.getElementById("submitBtn");

    function sanitize(input){
      const div = document.createElement("div");
      div.innerText = input;
      return div.innerHTML;
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const honeypot = form.querySelector('input[name="Website"]');
      if(honeypot && honeypot.value.trim()){
        formMsg.textContent = "Message sent successfully!";
        form.reset();
        setTimeout(() => formMsg.textContent = "", 2500);
        return;
      }

      if(!form.Name.value.trim() || !form.Email.value.trim() || !form.Message.value.trim()){
        formMsg.textContent = "Please fill out all fields.";
        return;
      }

      form.Name.value = sanitize(form.Name.value);
      form.Email.value = sanitize(form.Email.value);
      form.Message.value = sanitize(form.Message.value);

      formMsg.textContent = "Sending message...";
      submitBtn.disabled = true;

      try{
        const res = await fetch(DATA.googleScriptURL, { method: "POST", body: new FormData(form) });
        if(!res.ok) throw new Error("Failed");
        formMsg.textContent = "Message sent successfully!";
        form.reset();
        setTimeout(() => formMsg.textContent = "", 5000);
      }catch(err){
        formMsg.textContent = "Error sending message. Please try again later.";
      }finally{
        submitBtn.disabled = false;
      }
    });

    /* Back to top */
    const backTop = document.getElementById("backTop");
    window.addEventListener("scroll", () => backTop.classList.toggle("hidden", window.scrollY < 350));
    backTop.addEventListener("click", () => window.scrollTo({ top: 0, behavior: "smooth" }));

    /* Scroll reveal */
    const revealEls = document.querySelectorAll(".reveal");
    const obs = new IntersectionObserver((entries) => {
      entries.forEach(ent => {
        if(ent.isIntersecting){
          ent.target.classList.add("in");
          obs.unobserve(ent.target);
        }
      });
    }, { threshold: 0.12 });
    revealEls.forEach(el => obs.observe(el));

    /* Active nav */
    const sections = ["home","about","services","portfolio","contact"].map(id => document.getElementById(id)).filter(Boolean);
    const navLinks = [...document.querySelectorAll('a.navLink[href^="#"]')];
    const navObs = new IntersectionObserver((entries) => {
      entries.forEach(ent => {
        if(ent.isIntersecting){
          const sid = ent.target.id;
          navLinks.forEach(a => a.classList.toggle("active", a.getAttribute("href") === `#${sid}`));
        }
      });
    }, { threshold: 0.35 });
    sections.forEach(sec => navObs.observe(sec));

    /* Cursor */
    const cursorDot = document.getElementById("cursorDot");
    const cursorRing = document.getElementById("cursorRing");
    const cursorSelect = document.getElementById("cursorSelect");
    const cursorSelectMobile = document.getElementById("cursorSelectMobile");
    const cursorClasses = ["cursor-style-neo","cursor-style-dot","cursor-style-ring","cursor-style-glow"];

    function setCursorStyle(style){
      document.body.classList.remove("cursor-on", ...cursorClasses);
      if(style === "off"){
        localStorage.setItem("cursorStyle", "off");
        return;
      }
      document.body.classList.add("cursor-on");
      document.body.classList.add("cursor-style-" + style);
      localStorage.setItem("cursorStyle", style);
    }

    const storedCursor = localStorage.getItem("cursorStyle") || "neo";
    setCursorStyle(storedCursor);
    cursorSelect.value = storedCursor;
    cursorSelectMobile.value = storedCursor;

    cursorSelect.addEventListener("change", (e) => {
      setCursorStyle(e.target.value);
      cursorSelectMobile.value = e.target.value;
    });
    cursorSelectMobile.addEventListener("change", (e) => {
      setCursorStyle(e.target.value);
      cursorSelect.value = e.target.value;
    });

    let mx = 0, my = 0, dx = 0, dy = 0, rx = 0, ry = 0;
    document.addEventListener("mousemove", (e) => { mx = e.clientX; my = e.clientY; });

    const interactiveSelector = 'a, button, input, textarea, select, [role="button"]';
    document.addEventListener("pointerover", (e) => {
      if(!document.body.classList.contains("cursor-on")) return;
      if(e.target.closest(interactiveSelector)){
        cursorRing.style.width = "74px";
        cursorRing.style.height = "74px";
      }
    });
    document.addEventListener("pointerout", (e) => {
      if(!document.body.classList.contains("cursor-on")) return;
      if(e.target.closest(interactiveSelector)){
        cursorRing.style.width = "44px";
        cursorRing.style.height = "44px";
      }
    });

    function raf(){
      if(document.body.classList.contains("cursor-on")){
        dx += (mx - dx) * 0.45;
        dy += (my - dy) * 0.45;
        rx += (mx - rx) * 0.18;
        ry += (my - ry) * 0.18;
        cursorDot.style.transform = `translate(-50%, -50%) translate(${dx}px, ${dy}px)`;
        cursorRing.style.transform = `translate(-50%, -50%) translate(${rx}px, ${ry}px)`;
      }
      requestAnimationFrame(raf);
    }
    requestAnimationFrame(raf);

    /* ESC closes */
    window.addEventListener("keydown", (e) => {
      if(e.key === "Escape") {
        closeProject();
        closeCert();
        setMenu(false);
      }
    });
  </script>
</body>
</html>
